<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Fit Chain Ladder Plus to reverse time triangles. — clmplus.AggregateDataPP • clmplus</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Fit Chain Ladder Plus to reverse time triangles. — clmplus.AggregateDataPP"><meta name="description" content="Method to fit Chain Ladder plus models to AggregateDataPP objects."><meta property="og:description" content="Method to fit Chain Ladder plus models to AggregateDataPP objects."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">clmplus</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/casestudy1.html">Vignette 1</a></li>
    <li><a class="dropdown-item" href="../articles/modelscomparison.html">Models comparison</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/gpitt71/clmplus/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Fit Chain Ladder Plus to reverse time triangles.</h1>
      <small class="dont-index">Source: <a href="https://github.com/gpitt71/clmplus/blob/main/R/clmplusAggregateDataPP.R" class="external-link"><code>R/clmplusAggregateDataPP.R</code></a></small>
      <div class="d-none name"><code>clmplus.AggregateDataPP.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Method to fit Chain Ladder plus models to <code>AggregateDataPP</code> objects.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="co"># S3 method for class 'AggregateDataPP'</span></span>
<span><span class="fu"><a href="clmplus.html">clmplus</a></span><span class="op">(</span></span>
<span>  <span class="va">AggregateDataPP</span>,</span>
<span>  hazard.model <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  link <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"log"</span>, <span class="st">"logit"</span><span class="op">)</span>,</span>
<span>  staticAgeFun <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  periodAgeFun <span class="op">=</span> <span class="st">"NP"</span>,</span>
<span>  cohortAgeFun <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  effect_log_scale <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  constFun <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">ax</span>, <span class="va">bx</span>, <span class="va">kt</span>, <span class="va">b0x</span>, <span class="va">gc</span>, <span class="va">wxt</span>, <span class="va">ages</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>ax <span class="op">=</span> <span class="va">ax</span>, bx <span class="op">=</span> <span class="va">bx</span>, kt <span class="op">=</span> <span class="va">kt</span>, b0x</span>
<span>    <span class="op">=</span> <span class="va">b0x</span>, gc <span class="op">=</span> <span class="va">gc</span><span class="op">)</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-aggregatedatapp">AggregateDataPP<a class="anchor" aria-label="anchor" href="#arg-aggregatedatapp"></a></dt>
<dd><p><code>AggregateDataPP</code> object, reverse time triangle to be fitted.</p></dd>


<dt id="arg-hazard-model">hazard.model<a class="anchor" aria-label="anchor" href="#arg-hazard-model"></a></dt>
<dd><p><code>character</code>, hazard model supported from our package. The model can be chosen from:</p><ul><li><p>'a': Age model, this is equivalent to the Mack chain-ladder.</p></li>
<li><p>'ac': Age and cohort effects.</p></li>
<li><p>'ap': Age and cohort effects.</p></li>
<li><p>'apc': Age cohort and period effects.</p></li>
</ul></dd>


<dt id="arg-link">link<a class="anchor" aria-label="anchor" href="#arg-link"></a></dt>
<dd><p><code>character</code>, defines the link function and random component associated with
the mortality model. <code>"log"</code> would assume that deaths follow a
Poisson distribution and use a log link while <code>"logit"</code> would assume
that deaths follow a Binomial distribution and a logit link.
To be disregarded unless the practitioner specifies his own hazard model in StMoMo.</p></dd>


<dt id="arg-staticagefun">staticAgeFun<a class="anchor" aria-label="anchor" href="#arg-staticagefun"></a></dt>
<dd><p><code>logical</code>, indicates if a static age function
\(\alpha_x\) is to be included. To be disregarded unless the practitioner specifies his own hazard model in StMoMo.</p></dd>


<dt id="arg-periodagefun">periodAgeFun<a class="anchor" aria-label="anchor" href="#arg-periodagefun"></a></dt>
<dd><p><code>list</code>, a list of length \(N\) with the definitions of the
period age modulating parameters \(\beta_x^{(i)}\). Each entry can take
values: <code>"NP"</code> for non-parametric age terms, <code>"1"</code> for
\(\beta_x^{(i)}=1\) or a predefined parametric function of
age (see details). Set this to <code>NULL</code> if there are no period terms
in the model.
To be disregarded unless the practitioner specifies his own hazard model in StMoMo.</p></dd>


<dt id="arg-cohortagefun">cohortAgeFun<a class="anchor" aria-label="anchor" href="#arg-cohortagefun"></a></dt>
<dd><p><code>character</code> or <code>function</code>, defines the cohort age modulating parameter
\(\beta_x^{(0)}\). It can take values: <code>"NP"</code> for non-parametric
age terms, <code>"1"</code> for \(\beta_x^{(0)}=1\), a predefined parametric
function of age (see details) or <code>NULL</code> if there is no cohort effect.
To be disregarded unless the practitioner specifies his own hazard model in StMoMo.</p></dd>


<dt id="arg-effect-log-scale">effect_log_scale<a class="anchor" aria-label="anchor" href="#arg-effect-log-scale"></a></dt>
<dd><p><code>logical</code>, whether effects should be on the logarithmic scale. By default, <code>TRUE</code>.</p></dd>


<dt id="arg-constfun">constFun<a class="anchor" aria-label="anchor" href="#arg-constfun"></a></dt>
<dd><p><code>function</code>, it defines the identifiability constraints of the
model. It must be a function of the form
<code>constFun &lt;- function(ax, bx, kt, b0x, gc, wxt, ages)</code> taking a set
of fitted model parameters and returning a list
<code>list(ax = ax, bx = bx, kt = kt, b0x = b0x, gc = gc)</code>
of the model parameters with the identifiability constraints applied. If
omitted no identifiability constraints are applied to the model.
To be disregarded unless the practitioner specifies his own hazard model in StMoMo.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>parameters to be passed to clmplus.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>An object of class <code>clmplusmodel</code>. A list with the following elements:</p>
<dl><dt>model.fit</dt>
<dd><p><code>fitStMoMo</code> object, specified hazard model fit from StMoMo.</p></dd>


  <dt>apc_input</dt>
<dd><p><code>list</code> object. A list containing the following model inputs in age-period-cohort notation: <code>J</code> (<code>integer</code>) Run-off triangle dimension.  <code>eta</code> (<code>numeric</code>) Expected time-to-event in the cell. I.e., lost exposure.
  <code>diagonal</code> (<code>numeric</code>) Cumulative payments last diagonal. <code>hazard.model</code> (<code>character</code>), hazard model specified from the user. Set to <code>user.specific</code> when a custom model is passed.</p></dd>


  <dt>hazard_scaled_deviance_residuals</dt>
<dd><p><code>matrix array</code> Triangle of the scaled deviance residuals.</p></dd>


  <dt>fitted_development_factors</dt>
<dd><p><code>matrix array</code> Triangle of the fitted development factors.</p></dd>


  <dt>fitted_effects</dt>
<dd><p><code>list</code> List of the development-accident-calendar effects fitted.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Pittarello, Gabriele, Munir Hiabu, and Andrés M. Villegas. "Replicating and extending chain ladder
via an age-period-cohort structure on the claim development in a run-off triangle." arXiv preprint arXiv:2301.03858 (2023).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">sifa.mtpl</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">sifa.mtpl.rtt</span> <span class="op">&lt;-</span> <span class="fu"><a href="AggregateDataPP.html">AggregateDataPP</a></span><span class="op">(</span>cumulative.payments.triangle<span class="op">=</span><span class="va">sifa.mtpl</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">hz.chl</span><span class="op">=</span><span class="fu"><a href="clmplus.html">clmplus</a></span><span class="op">(</span><span class="va">sifa.mtpl.rtt</span>, <span class="st">'a'</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>StMoMo: 66 missing values which have been zero weighted</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> StMoMo: The following ages have been zero weigthed: 1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> StMoMo: The following years have been zero weigthed: 1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> StMoMo: The following cohorts have been zero weigthed: -11 -10 -9 -8 -7 -6 -5 -4 -3 -2 -1 11 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> StMoMo: Start fitting with gnm</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>non-integer x = 860.063891</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>non-integer x = 458.156066</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>non-integer x = 559.340054</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>non-integer x = 281.869679</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>non-integer x = 456.270650</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>non-integer x = 727.142070</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>non-integer x = 49353.589600</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>non-integer x = 50605.820000</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>non-integer x = 29251.193380</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>non-integer x = 36106.295210</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>non-integer x = 40125.390780</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>non-integer x = 44498.942240</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>non-integer x = 45490.189570</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>non-integer x = 48040.321560</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>non-integer x = 49991.357650</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>non-integer x = 49694.294990</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>non-integer x = 20880.666980</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>non-integer x = 18304.246140</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>non-integer x = 18603.713030</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>non-integer x = 12463.983790</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>non-integer x = 13441.333110</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>non-integer x = 12951.176400</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>non-integer x = 15370.423630</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>non-integer x = 15339.426370</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>non-integer x = 17842.901760</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>non-integer x = 19570.203660</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>non-integer x = 10047.067150</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>non-integer x = 8201.559214</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>non-integer x = 8833.487780</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>non-integer x = 5144.085289</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>non-integer x = 5868.234632</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>non-integer x = 6033.755464</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>non-integer x = 5593.853546</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>non-integer x = 5478.076757</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>non-integer x = 7035.199194</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>non-integer x = 3933.606063</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>non-integer x = 5749.890057</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>non-integer x = 4714.168250</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>non-integer x = 2726.947823</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>non-integer x = 2881.972323</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>non-integer x = 3009.655856</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>non-integer x = 2615.516340</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>non-integer x = 2540.639658</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>non-integer x = 2906.368627</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>non-integer x = 2725.682936</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>non-integer x = 3312.691467</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>non-integer x = 2359.362462</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>non-integer x = 2421.987896</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>non-integer x = 1264.396267</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>non-integer x = 1984.311792</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>non-integer x = 2136.804699</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>non-integer x = 1294.338023</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>non-integer x = 2266.599873</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>non-integer x = 1333.856105</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>non-integer x = 918.004039</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>non-integer x = 1249.952517</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>non-integer x = 1134.706143</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>non-integer x = 1184.355428</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>non-integer x = 1124.336355</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>non-integer x = 1238.429974</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>non-integer x = 1075.978340</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>non-integer x = 733.741025</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>non-integer x = 904.371165</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>non-integer x = 872.633331</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>non-integer x = 941.440475</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> StMoMo: Finish fitting with gnm</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Gabriele Pittarello, Munir Hiabu, Andres Villegas.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

    </footer></div>





  </body></html>

